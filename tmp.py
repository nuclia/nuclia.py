from nuclia import sdk
from nuclia.lib.kb import LogType
from nuclia.lib.models import ActivityLogsQuery, Pagination

KNOWLEDGE_BOX_URL = (
    "https://europe-1.nuclia.cloud/api/v1/kb/ec670788-d6e5-4814-839a-589054d27523"
)
API_KEY = "eyJhbGciOiJSUzI1NiIsImtpZCI6InNhIiwidHlwIjoiSldUIn0.eyJpc3MiOiJodHRwczovL2V1cm9wZS0xLm51Y2xpYS5jbG91ZC8iLCJpYXQiOjE3Mjc4NzU3MTksInN1YiI6IjQ2YTkyZmRkLTNiZWItNGFiMi05MWIxLWY0OTIyNmI5MWRjOCIsImp0aSI6Ijg5Mjk2MWJiLTEwMWEtNGU1OS04YWY0LWYzOWM2NjA0MzMyMSIsImV4cCI6MTc1OTQxMTcxOSwia2V5IjoiOWQ0ZTMwZjEtYjMyNy00ODU0LTliM2YtMWUwYzhiZjFjOTFkIiwia2lkIjoiODg5YzhkMWMtM2U5ZS00MTA1LWI2MGMtNTViMDA1ZDY3OGQyIn0.dlasSrZ1L09JnOyiooKb_yVQGp2nCjHhMH1IkSqk7Sr1lAjE7c7BVzArWRmXORErCnlbqc3g2uSD3ZQV3Arj78Suw9131v-GaAmI8CZNUtGLJrqpWE7pVRGS36P34bLV7Ord3F04sGM2eHLcZpu7zzJSthR6Up3DqsMNLtZ2ri_W4Yv2Hl9u_GkNCSTDzVVrNq7CJqsX_sgraCib5OLYyIfE8Zlo35PsL95mztrMaZWWyWpDngUZNZId6iwfBDCnBK-CnnjCZYEp-PJjph7tXrco8lPwzwCSPJLW3t_-9wHC0cyxhjRUNRqe7SuYwus929Ret_QT-B-uZH0a8pv370y0XmLJpNAeTQSI9zIQFcg_rOnUY_GZT7ot4AAuGRM-8rUedqLu4rjhrjgTyvgXAdsT-Jlqm70UDAK7PCP56tuFS7StIOb0GlCGov2UwNyrJijUn47kl47KY6vDV-P2RnEm5VhhwP0p_-QBWKCywmh349JJZbzhgKYrWIkXuUr_5zUfOx_Mye7HF4c-3KDfbmTvLBNHCt9AmKo9fNTyUhqg8d09kRVxkllCMF9QDi-sW7Ahsif4pIIeX08dgg7CSVo4aO1FqQL-bCvwSNft-Myh-WsR2YAqB6Aum0vGDwRQq5IYYfNT-0mPD1duhp_18B9dIbE4LQ5EamUwPWpZ5oo"
USER_TOKEN = "eyJhbGciOiJSUzI1NiIsImtpZCI6InB1YmxpYzoxYzhjNjg5OC00YjdjLTQ3NTgtOGU0NC0yODQ0YWQyMjkzM2IiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOlsiaHR0cHM6Ly9udWNsaWEuY2xvdWQiXSwiY2xpZW50X2lkIjoibnVjbGlhLWZpcnN0LXBhcnR5LWNsaWVudCIsImV4cCI6MTcyODM3ODAwMywiZXh0Ijp7ImZpcnN0X25hbWUiOiJEYXZpZCBSdWl6IEZhbGNvIiwidHlwZSI6InIifSwiaWF0IjoxNzI3OTQ2MDAyLCJpc3MiOiJodHRwczovL29hdXRoLm51Y2xpYS5jbG91ZC8iLCJqdGkiOiJmNThkNTU2ZC01NDMzLTRjNmYtYTQ5YS1kZTkxNGE0NDI4YWIiLCJuYmYiOjE3Mjc5NDYwMDIsInNjcCI6WyJvZmZsaW5lIl0sInN1YiI6Ijk0NmQyZjdjLWM4NTMtNDI3ZS1hNDcyLTRhZWZiMTJjZDAyYyJ9.LJITAMNUCftxbQUIs8R6jxZU3PXT5alFef89dAtbCy836yczK7GKAqY9vbnfLVn7fOTp6EFdWp7z8kACuUP26qGcTtfaB9Q4JcTqi2Y-Ro73scYPfdUS59yy4-d0JMs5XbuTTzf6NT7cBIEgg4exW3gQZVsSzTgiULv7sr_QT1vYd_B_okwovugxyNT5b5-1OE2WtbM8J2xzLMvNyFl42mOp_a-7GihqPadjJPbN-qdeSS8MxDoROYSf6VvmMKKg-i0lDZjdHjqwXxu7SMt0oUbPx2TYNc20lZzHhCa5mrVyhtIccaum-NHe6bImutgnoEBPTOXTBWC1jOwMUYBfeuALWDNBncAkjI4M9q866e3yjBzmb8FL3PLBrgAaEuwYI1n2WB04vOnD0Lghmn1ev1dwIeGMdSYMZZKkzypP5N9Qtsn9NBcsEmI2BvDB1aqqUmL_PbUSNkrqh2fINRDjyf1B--RIcDFS09vvh6F5Ecv021vEHuy_T6t9l7F-6X7mE2Rouj50pa6IlwAnRnR--lIo355FPhcBLhUIxza1tVfp5yeClXnWmAxPM2Z0pLwA8s7mxs7I_T4kHp4oYcP4aFZqHKPr4qEyW21dIC3_PscrKeiwF5e7MJwtKfVslh442VGlyFu-znf7m8tt1TNPjct_GwXoXqt-pkwgY9DSspU"
NUA_KEY = "eyJhbGciOiJSUzI1NiIsImtpZCI6Im51YSIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2V1cm9wZS0xLm51Y2xpYS5jbG91ZC8iLCJpYXQiOjE3MjgwMzA2MTIsInN1YiI6Ijc5Y2YyZmVmLWVkNzktNGVhMC1hZDUxLTQ4ZTIyZTk1ZmJmZiIsImp0aSI6ImUzYzUyYWY4LTI1YWUtNDQ3Ni1iM2JiLTAzMjUyZjViM2ViNyIsImV4cCI6MjUzMzcwNzY0ODAwLCJrZXkiOiI0ODNiMGNkMC1mNWU4LTQwNmQtOWVkZC01NjM1N2VhMDFmNDMiLCJhbGxvd19rYl9tYW5hZ2VtZW50IjpmYWxzZX0.fkpnXU0dHxa5JAG1ZBWR1k4Deq69hn5ynxNyoif_wmtFsfGNFB6FuHIkbHmOgf8R6sc7Jb3P4-7h-BSEJk3PfOROQeSqrFoBRXWfIc317z9d5rAImnJQ1j3sgKFv4OldB5DAQEeztbo-VtPNt2GXJwNgroRHMAnnNPVmviwMNmU7kEZZSbxE5LwJGuKosl1o2jd6EW6Dtbj0E1Lkd-kTnTM8QhLdnBtgtRyqdtauYg6amkqWdRN7Fc9ENJW_uoAMDjl93qB7dOAt1KoyvjfCy--DNowfOqjjWDBmsj7ijeS0hmqbr10HzLTk1geqNfvsDVKsX5EJZ0zokCCQ1d_CxOPRGZeS8I2B71HtAby5_ZT9rdU9wdIZp4TItXi8Y1nIjrZpXDQe88nLozApX7kyI-YOEeRU_Ydf6sP3ALibRjZf3rDAe0Q8GorkBo1wejcChfe7zMXg93biCORej0fgupNfCq49M43y0RK5Csp3tZVGqP0QHgkRRZDQgb1MXcPKCX3YEn6nhNHthGVTjVBntcKCuTHkmvYyd6hTJ_MfuJQLO9Qst3Y1t5qdqHm2D33KNbG2SPjSCQKep_NS5XKlSWBSH7c-CuGPonRI7R18UwDmSR-_kjGBN-syu2OHfEvhQ6pxuD6qDCERh7SaLZJPzbIctkx8H_Q6GBTZ-2TO-Pg"
# export GA_TESTING_TOKEN="eyJhbGciOiJSUzI1NiIsImtpZCI6InB1YmxpYzoxYzhjNjg5OC00YjdjLTQ3NTgtOGU0NC0yODQ0YWQyMjkzM2IiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOlsiaHR0cHM6Ly9udWNsaWEuY2xvdWQiXSwiY2xpZW50X2lkIjoibnVjbGlhLWZpcnN0LXBhcnR5LWNsaWVudCIsImV4cCI6MTcyODM3ODAwMywiZXh0Ijp7ImZpcnN0X25hbWUiOiJEYXZpZCBSdWl6IEZhbGNvIiwidHlwZSI6InIifSwiaWF0IjoxNzI3OTQ2MDAyLCJpc3MiOiJodHRwczovL29hdXRoLm51Y2xpYS5jbG91ZC8iLCJqdGkiOiJmNThkNTU2ZC01NDMzLTRjNmYtYTQ5YS1kZTkxNGE0NDI4YWIiLCJuYmYiOjE3Mjc5NDYwMDIsInNjcCI6WyJvZmZsaW5lIl0sInN1YiI6Ijk0NmQyZjdjLWM4NTMtNDI3ZS1hNDcyLTRhZWZiMTJjZDAyYyJ9.LJITAMNUCftxbQUIs8R6jxZU3PXT5alFef89dAtbCy836yczK7GKAqY9vbnfLVn7fOTp6EFdWp7z8kACuUP26qGcTtfaB9Q4JcTqi2Y-Ro73scYPfdUS59yy4-d0JMs5XbuTTzf6NT7cBIEgg4exW3gQZVsSzTgiULv7sr_QT1vYd_B_okwovugxyNT5b5-1OE2WtbM8J2xzLMvNyFl42mOp_a-7GihqPadjJPbN-qdeSS8MxDoROYSf6VvmMKKg-i0lDZjdHjqwXxu7SMt0oUbPx2TYNc20lZzHhCa5mrVyhtIccaum-NHe6bImutgnoEBPTOXTBWC1jOwMUYBfeuALWDNBncAkjI4M9q866e3yjBzmb8FL3PLBrgAaEuwYI1n2WB04vOnD0Lghmn1ev1dwIeGMdSYMZZKkzypP5N9Qtsn9NBcsEmI2BvDB1aqqUmL_PbUSNkrqh2fINRDjyf1B--RIcDFS09vvh6F5Ecv021vEHuy_T6t9l7F-6X7mE2Rouj50pa6IlwAnRnR--lIo355FPhcBLhUIxza1tVfp5yeClXnWmAxPM2Z0pLwA8s7mxs7I_T4kHp4oYcP4aFZqHKPr4qEyW21dIC3_PscrKeiwF5e7MJwtKfVslh442VGlyFu-znf7m8tt1TNPjct_GwXoXqt-pkwgY9DSspU"
# export GA_TESTING_NUA="eyJhbGciOiJSUzI1NiIsImtpZCI6Im51YSIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2V1cm9wZS0xLm51Y2xpYS5jbG91ZC8iLCJpYXQiOjE3MjgwMzA2MTIsInN1YiI6Ijc5Y2YyZmVmLWVkNzktNGVhMC1hZDUxLTQ4ZTIyZTk1ZmJmZiIsImp0aSI6ImUzYzUyYWY4LTI1YWUtNDQ3Ni1iM2JiLTAzMjUyZjViM2ViNyIsImV4cCI6MjUzMzcwNzY0ODAwLCJrZXkiOiI0ODNiMGNkMC1mNWU4LTQwNmQtOWVkZC01NjM1N2VhMDFmNDMiLCJhbGxvd19rYl9tYW5hZ2VtZW50IjpmYWxzZX0.fkpnXU0dHxa5JAG1ZBWR1k4Deq69hn5ynxNyoif_wmtFsfGNFB6FuHIkbHmOgf8R6sc7Jb3P4-7h-BSEJk3PfOROQeSqrFoBRXWfIc317z9d5rAImnJQ1j3sgKFv4OldB5DAQEeztbo-VtPNt2GXJwNgroRHMAnnNPVmviwMNmU7kEZZSbxE5LwJGuKosl1o2jd6EW6Dtbj0E1Lkd-kTnTM8QhLdnBtgtRyqdtauYg6amkqWdRN7Fc9ENJW_uoAMDjl93qB7dOAt1KoyvjfCy--DNowfOqjjWDBmsj7ijeS0hmqbr10HzLTk1geqNfvsDVKsX5EJZ0zokCCQ1d_CxOPRGZeS8I2B71HtAby5_ZT9rdU9wdIZp4TItXi8Y1nIjrZpXDQe88nLozApX7kyI-YOEeRU_Ydf6sP3ALibRjZf3rDAe0Q8GorkBo1wejcChfe7zMXg93biCORej0fgupNfCq49M43y0RK5Csp3tZVGqP0QHgkRRZDQgb1MXcPKCX3YEn6nhNHthGVTjVBntcKCuTHkmvYyd6hTJ_MfuJQLO9Qst3Y1t5qdqHm2D33KNbG2SPjSCQKep_NS5XKlSWBSH7c-CuGPonRI7R18UwDmSR-_kjGBN-syu2OHfEvhQ6pxuD6qDCERh7SaLZJPzbIctkx8H_Q6GBTZ-2TO-Pg"
# export GA_TESTING_SERVICE_TOKEN="eyJhbGciOiJSUzI1NiIsImtpZCI6InNhIiwidHlwIjoiSldUIn0.eyJpc3MiOiJodHRwczovL2V1cm9wZS0xLm51Y2xpYS5jbG91ZC8iLCJpYXQiOjE3Mjc4NzU3MTksInN1YiI6IjQ2YTkyZmRkLTNiZWItNGFiMi05MWIxLWY0OTIyNmI5MWRjOCIsImp0aSI6Ijg5Mjk2MWJiLTEwMWEtNGU1OS04YWY0LWYzOWM2NjA0MzMyMSIsImV4cCI6MTc1OTQxMTcxOSwia2V5IjoiOWQ0ZTMwZjEtYjMyNy00ODU0LTliM2YtMWUwYzhiZjFjOTFkIiwia2lkIjoiODg5YzhkMWMtM2U5ZS00MTA1LWI2MGMtNTViMDA1ZDY3OGQyIn0.dlasSrZ1L09JnOyiooKb_yVQGp2nCjHhMH1IkSqk7Sr1lAjE7c7BVzArWRmXORErCnlbqc3g2uSD3ZQV3Arj78Suw9131v-GaAmI8CZNUtGLJrqpWE7pVRGS36P34bLV7Ord3F04sGM2eHLcZpu7zzJSthR6Up3DqsMNLtZ2ri_W4Yv2Hl9u_GkNCSTDzVVrNq7CJqsX_sgraCib5OLYyIfE8Zlo35PsL95mztrMaZWWyWpDngUZNZId6iwfBDCnBK-CnnjCZYEp-PJjph7tXrco8lPwzwCSPJLW3t_-9wHC0cyxhjRUNRqe7SuYwus929Ret_QT-B-uZH0a8pv370y0XmLJpNAeTQSI9zIQFcg_rOnUY_GZT7ot4AAuGRM-8rUedqLu4rjhrjgTyvgXAdsT-Jlqm70UDAK7PCP56tuFS7StIOb0GlCGov2UwNyrJijUn47kl47KY6vDV-P2RnEm5VhhwP0p_-QBWKCywmh349JJZbzhgKYrWIkXuUr_5zUfOx_Mye7HF4c-3KDfbmTvLBNHCt9AmKo9fNTyUhqg8d09kRVxkllCMF9QDi-sW7Ahsif4pIIeX08dgg7CSVo4aO1FqQL-bCvwSNft-Myh-WsR2YAqB6Aum0vGDwRQq5IYYfNT-0mPD1duhp_18B9dIbE4LQ5EamUwPWpZ5oo"
output = sdk.NucliaAuth().kb(
    url=KNOWLEDGE_BOX_URL, token=API_KEY
)  # TODO: add service account user to authorizer
# output = sdk.NucliaAuth().set_user_token(USER_TOKEN)
print(output)

# kbs = sdk.NucliaKBS().list()
# print(kbs)
# sdk.NucliaKBS().default(kb="ec670788-d6e5-4814-839a-589054d27523")

kb = sdk.NucliaKB()
resources = kb.list(page=0, size=10)
# print(resources)

query = ActivityLogsQuery(
    year_month="2024-10",
    show=["id", "date", "question", "answer"],
    filters={},
    pagination=Pagination(limit=10),
)

output = kb.logs.query(
    type=LogType.CHAT,
    query=query,  # {"year_month": "2024-10", "filters": {}, "pagination": {"limit": 1}},
)
print(output)
